# Sub-agent モデル選択マトリクス

タスクの複雑さに応じてモデルを使い分け、コストを最適化します。

## モデル選択表

| タスクタイプ | 推奨モデル | 理由 |
|-------------|-----------|------|
| ファイル探索・検索 | haiku | 速度・コスト優先 |
| コードレビュー（形式確認） | haiku | パターンマッチング中心 |
| バグ修正・実装 | sonnet | バランス型 |
| セキュリティ監査 | sonnet | 高精度が必要 |
| アーキテクチャ設計 | sonnet または opus | 複雑な推論が必要 |
| リファクタリング（大規模） | inherit | メイン会話設定を使う |

## Haiku エージェントの設定例

```markdown
---
name: file-explorer
description: >
  ファイルの検索・一覧・内容確認に特化した高速エージェント。
  コード探索タスクに積極的に使用。
tools: Read, Grep, Glob
model: haiku
---

ファイル探索エキスパートとして、要求された情報を
効率的に収集して報告してください。
変更は行いません。見つけた情報のみを返します。
```

## Sub-agents のモデルを一括設定

```bash
# 全 Sub-agents を Haiku に設定
export CLAUDE_CODE_SUBAGENT_MODEL=haiku
```

## inherit の使いどころ

model: inherit はメイン会話のモデル設定を引き継ぎます。
プロダクション品質が求められるタスクや、メイン会話の設定に追随させたい場合に使います。

## 注意事項

モデルエイリアス（haiku）は実行時に最新の対応モデルに解決されます。
特定モデル ID を直接指定するとバージョンが固定されるため、通常はエイリアスを推奨します。
